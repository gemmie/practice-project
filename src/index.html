<!DOCTYPE html>
<html lang='en'>
<head>
    <script type="text/javascript" src='https://unpkg.com/mqtt/dist/mqtt.min.js' ></script>
    <title>test site</title>
    <script type="text/javascript">
        const client = mqtt.connect('ws://localhost:9001');
        console.log(client)
        client.subscribe('topic1');
        client.on('connect', () => {
            console.log('connected')

            const node = document.createTextNode('connected');
            const paragraph = document.createElement('p');
            paragraph.appendChild(node);

            const body = document.querySelector('body');
            body.appendChild(paragraph);

        });

        client.on("message", function (topic, payload) {

            const node = document.createTextNode(`${topic}: ${payload}`);
            const paragraph = document.createElement('p');
            paragraph.appendChild(node);

            const body = document.querySelector('body');
            body.appendChild(paragraph);

            console.log([topic, payload].join(": "))
        })

    </script>
</head>
<body>
XD
</body>
</html>